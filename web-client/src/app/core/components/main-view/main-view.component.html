<ng-container *ngIf="dataLoaded else loader">
  <div class="container fh">
    <header [@slideOut]>
      <div class="fluid-container flex_center-center fh header">
        <div class="row">
          <div class="column-3 armies">
            <my-armies-widget [@slideIn]="{ value: true, params: { delay: '50ms' }}"></my-armies-widget>
          </div>
          <div class="column-7 navigation">
            <navigational-menu
              [locations]="mainMenu"
              [@slideIn]="{ value: true, params: { delay: '125ms' }}">
            </navigational-menu>
            <my-profile-widget 
              #profilePanelOrigin="panel-origin" 
              panel-origin 
              onClick
              [active]="profilePanelOrigin.isOpen" 
              [@slideIn]="{ value: true, params: { delay: '200ms' }}">
            </my-profile-widget>      
            <panel-overlay [hideOnMouseLeave]="true" [origin]="profilePanelOrigin">
              <navigational-menu
                class="secondary-menu" 
                vertical
                showIcons
                [locations]="secondaryMenu">
              </navigational-menu>
            </panel-overlay>
          </div>
        </div>
      </div>
      <div class="fluid-container header mobile">
        <my-armies-widget [@slideIn]="{ value: true, params: { delay: '50ms' }}"></my-armies-widget> 
        <mobile-menu-button 
          (click)="modal.open()"
          [@slideIn]="{ value: true, params: { delay: '150ms' }}"
          [locations]="[mainMenu, secondaryMenu, mobileMenu]">
        </mobile-menu-button>
      </div>
    </header>
    <main 
      [@routeAnimations]="prepareRoute(outlet)" 
      [@triggerChilds]="{ value: dataLoaded ? 'loaded' : 'void' }">
      <router-outlet #outlet="outlet"></router-outlet>
    </main>
    <footer>
      copyright
    </footer>
  </div>
</ng-container>

<ng-template #loader>
  <div class="fluid-container fh">
    <div class="row fh">
      <div class="column-10 flex_center-center">
        <div circle-spinner></div>
      </div>
    </div>
  </div>
</ng-template>


<modal #modal>
  <div class="modal-inner">
    <my-avatar-widget class="avatar"></my-avatar-widget>
    <navigational-menu
      class="mobile-menu"
      vertical
      [locations]="[mainMenu, secondaryMenu, mobileMenu]">
    </navigational-menu>
  </div>
</modal>
